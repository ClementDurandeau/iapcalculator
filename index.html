<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Commissions App Store pour Video Partner Program</title>
    <style>
        :root {
            --primary: #0070c9;
            --primary-dark: #005ea3;
            --secondary: #34c759;
            --light-gray: #f5f5f7;
            --medium-gray: #e5e5e5;
            --dark-gray: #86868b;
            --text: #1d1d1f;
            --error: #ff3b30;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--light-gray);
            margin: 0;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--text);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        input[type="number"], input[type="text"], select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input[type="number"]:focus, input[type="text"]:focus, select:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: block;
            margin: 30px auto;
            width: 200px;
        }
        
        button:hover {
            background-color: var(--primary-dark);
        }
        
        .result-container {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--medium-gray);
        }
        
        .result-group {
            margin-bottom: 30px;
        }
        
        .result-heading {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .fee-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 8px 0;
        }
        
        .fee-description {
            flex: 3;
        }
        
        .fee-amount {
            flex: 1;
            text-align: right;
            font-weight: 500;
        }
        
        .total-row {
            border-top: 1px solid var(--medium-gray);
            padding-top: 15px;
            margin-top: 15px;
            font-weight: 600;
            font-size: 18px;
        }
        
        .savings {
            margin-top: 30px;
            padding: 15px;
            background-color: var(--light-gray);
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }
        
        .savings-amount {
            font-weight: 600;
            color: var(--secondary);
        }
        
        .column-layout {
            display: flex;
            gap: 30px;
        }
        
        .column {
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .column-layout {
                flex-direction: column;
            }
            
            .container {
                padding: 20px;
            }
        }
        
        .custom-range {
            width: 100%;
            margin-top: 10px;
            margin-bottom: 5px;
        }
        
        .range-values {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 14px;
            color: var(--dark-gray);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
        }

        .comparison-table th, .comparison-table td {
            border: 1px solid var(--medium-gray);
            padding: 12px;
            text-align: left;
        }

        .comparison-table th {
            background-color: var(--light-gray);
            font-weight: 600;
        }

        .comparison-table tr:nth-child(even) {
            background-color: var(--light-gray);
        }

        .better-option {
            color: var(--secondary);
            font-weight: 600;
        }

        .info-box {
            background-color: #f0f0f7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
        }
        
        .program-badge {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .summary-box {
            margin-top: 30px;
            background-color: #f0f9f2;
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid var(--secondary);
        }
        
        .summary-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: var(--light-gray);
            border: 1px solid var(--medium-gray);
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
        }
        
        .tab.active {
            background-color: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
            font-weight: 500;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .small-btn {
            font-size: 14px;
            padding: 8px 16px;
            margin: 0;
            width: auto;
            display: inline-block;
        }
        
        .input-group {
            display: flex;
            align-items: center;
        }
        
        .input-group input {
            border-radius: 8px 0 0 8px;
        }
        
        .input-group .euro-symbol {
            background: var(--medium-gray);
            padding: 12px 15px;
            border-radius: 0 8px 8px 0;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculateur de Commissions App Store pour Video Partner Program</h1>
        
        <div class="info-box">
            <span class="program-badge">Apple Video Partner Program</span>
            <p>Ce calculateur est conçu spécialement pour les membres du Apple Video Partner Program, qui bénéficient d'un taux de commission réduit selon la plateforme <strong>uniquement lors de l'utilisation des achats in-app d'Apple</strong> :</p>
            <ul>
                <li><strong>iOS/iPadOS</strong> : Commission de 10% + 3% de frais de traitement avec IAP</li>
                <li><strong>macOS/tvOS/visionOS/watchOS</strong> : Commission de 12% + 3% de frais de traitement avec IAP</li>
            </ul>
            <p><strong>Attention :</strong> L'utilisation d'un système de paiement alternatif vous fait sortir du Video Partner Program et vous soumet aux taux standards (17% ou 27% selon la plateforme).</p>
            <p><strong>Note importante</strong> : Pour les achats uniques (pas les abonnements) utilisant un paiement alternatif, un frais d'acquisition supplémentaire de 5% s'applique, conformément aux règles du DMA.</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="monthly-revenue">Chiffre d'affaires mensuel</div>
            <div class="tab" data-tab="single-item">Prix d'un article</div>
        </div>
        
        <div class="tab-content active" id="monthly-revenue-content">
            <div class="column-layout">
                <div class="column">
                    <div class="form-group">
                        <label for="monthly-amount">Chiffre d'affaires mensuel estimé (€)</label>
                        <input type="number" id="monthly-amount" min="0" value="10000">
                    </div>
                    
                    <div class="form-group">
                        <label for="platform-monthly">Plateforme</label>
                        <select id="platform-monthly">
                            <option value="ios-ipados">iOS/iPadOS</option>
                            <option value="macos-tvos">macOS/tvOS/visionOS/watchOS</option>
                        </select>
                    </div>
                </div>
                
                <div class="column">
                    <div class="form-group">
                        <label for="psp-rate-monthly">Taux du prestataire de paiement (%)</label>
                        <input type="range" id="psp-rate-monthly" class="custom-range" min="1" max="10" step="0.1" value="5">
                        <div class="range-values">
                            <span>1%</span>
                            <span id="psp-rate-value-monthly">5%</span>
                            <span>10%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="calculate-monthly-btn">Calculer</button>
        </div>
        
        <div class="tab-content" id="single-item-content">
            <div class="column-layout">
                <div class="column">
                    <div class="form-group">
                        <label for="item-price">Prix de l'article (€)</label>
                        <div class="input-group">
                            <input type="number" id="item-price" min="0" step="0.01" value="9.99">
                            <span class="euro-symbol">€</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-type">Type de produit</label>
                        <select id="product-type">
                            <option value="subscription">Abonnement</option>
                            <option value="one-time">Achat unique</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="platform-item">Plateforme</label>
                        <select id="platform-item">
                            <option value="ios-ipados">iOS/iPadOS</option>
                            <option value="macos-tvos">macOS/tvOS/visionOS/watchOS</option>
                        </select>
                    </div>
                </div>
                
                <div class="column">
                    <div class="form-group">
                        <label for="psp-rate-item">Taux du prestataire de paiement (%)</label>
                        <input type="range" id="psp-rate-item" class="custom-range" min="1" max="10" step="0.1" value="5">
                        <div class="range-values">
                            <span>1%</span>
                            <span id="psp-rate-value-item">5%</span>
                            <span>10%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="calculate-item-btn">Calculer</button>
        </div>
        
        <div class="result-container">
            <div class="column-layout">
                <div class="column result-group">
                    <div class="result-heading">Option 1: IAP Apple</div>
                    <div id="apple-results">
                        <div class="fee-detail">
                            <div class="fee-description">Commission Apple (Video Partner Program)</div>
                            <div class="fee-amount" id="apple-base-fee">--</div>
                        </div>
                        <div class="fee-detail">
                            <div class="fee-description">Frais de traitement de paiement</div>
                            <div class="fee-amount" id="apple-processing-fee">--</div>
                        </div>
                        <div class="fee-detail total-row">
                            <div class="fee-description">Total des frais</div>
                            <div class="fee-amount" id="apple-total-fee">--</div>
                        </div>
                        <div class="fee-detail">
                            <div class="fee-description">Revenu net</div>
                            <div class="fee-amount" id="apple-net-revenue">--</div>
                        </div>
                    </div>
                </div>
                
                <div class="column result-group">
                    <div class="result-heading">Option 2: Paiement Alternatif</div>
                    <div id="alternative-results">
                        <div class="fee-detail">
                            <div class="fee-description">Commission Apple standard</div>
                            <div class="fee-amount" id="alt-apple-fee">--</div>
                        </div>
                        <div class="fee-detail">
                            <div class="fee-description">Frais du prestataire de paiement</div>
                            <div class="fee-amount" id="alt-psp-fee">--</div>
                        </div>
                        <div id="alt-acquisition-container"></div>
                        <div class="fee-detail total-row">
                            <div class="fee-description">Total des frais</div>
                            <div class="fee-amount" id="alt-total-fee">--</div>
                        </div>
                        <div class="fee-detail">
                            <div class="fee-description">Revenu net</div>
                            <div class="fee-amount" id="alt-net-revenue">--</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="savings" id="savings-container">
                <div id="savings-text">Calculez pour voir la différence entre les options.</div>
            </div>
            
            <div class="comparison-table-container">
                <h2>Comparaison détaillée</h2>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>IAP Apple</th>
                            <th>Paiement Alternatif</th>
                            <th>Option préférable</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Coût total (%)</td>
                            <td id="compare-apple-percent">--</td>
                            <td id="compare-alt-percent">--</td>
                            <td id="compare-cost-winner">--</td>
                        </tr>
                        <tr>
                            <td>Revenu net</td>
                            <td id="compare-apple-revenue">--</td>
                            <td id="compare-alt-revenue">--</td>
                            <td id="compare-revenue-winner">--</td>
                        </tr>
                        <tr>
                            <td>Expérience utilisateur</td>
                            <td>Fluide et familière pour les utilisateurs iOS</td>
                            <td>Peut être personnalisée mais nécessite plus d'étapes</td>
                            <td>IAP Apple</td>
                        </tr>
                        <tr>
                            <td>Relation client</td>
                            <td>Limitée (pas d'accès aux données client)</td>
                            <td>Directe (accès aux emails, préférences)</td>
                            <td>Paiement Alternatif</td>
                        </tr>
                        <tr id="video-partner-row">
                            <td>Avantages du Video Partner Program</td>
                            <td>Conservation de tous les avantages (intégration Apple TV, etc.)</td>
                            <td>Perte de tous les avantages du programme</td>
                            <td>IAP Apple</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="summary-box">
                <div class="summary-title">Conclusion</div>
                <p id="conclusion-text">Calculez pour voir notre conclusion basée sur votre situation.</p>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId + '-content').classList.add('active');
                });
            });
            
            // Update PSP rate value displays
            const pspRateMonthly = document.getElementById('psp-rate-monthly');
            const pspRateValueMonthly = document.getElementById('psp-rate-value-monthly');
            
            pspRateMonthly.addEventListener('input', function() {
                pspRateValueMonthly.textContent = this.value + '%';
            });
            
            const pspRateItem = document.getElementById('psp-rate-item');
            const pspRateValueItem = document.getElementById('psp-rate-value-item');
            
            pspRateItem.addEventListener('input', function() {
                pspRateValueItem.textContent = this.value + '%';
            });
            
            // Calculate buttons
            document.getElementById('calculate-monthly-btn').addEventListener('click', function() {
                calculateFeesForMonthly();
            });
            
            document.getElementById('calculate-item-btn').addEventListener('click', function() {
                calculateFeesForItem();
            });
            
            // Initialize with monthly calculation
            calculateFeesForMonthly();
            
            function calculateFeesForMonthly() {
                // Get input values
                const revenue = parseFloat(document.getElementById('monthly-amount').value) || 0;
                const platform = document.getElementById('platform-monthly').value;
                const pspRate = parseFloat(document.getElementById('psp-rate-monthly').value) || 5;
                
                calculateFees(revenue, platform, pspRate, 'monthly');
            }
            
            function calculateFeesForItem() {
                // Get input values
                const itemPrice = parseFloat(document.getElementById('item-price').value) || 0;
                const productType = document.getElementById('product-type').value;
                const platform = document.getElementById('platform-item').value;
                const pspRate = parseFloat(document.getElementById('psp-rate-item').value) || 5;
                
                calculateFees(itemPrice, platform, pspRate, 'item', productType);
            }
            
            function calculateFees(amount, platform, pspRate, mode, productType = 'subscription') {
                // Base commission rate based on platform for Video Partner Program (for IAP only)
                let appleIAPRate;
                if (platform === 'ios-ipados') {
                    appleIAPRate = 10; // 10% for iOS/iPadOS
                } else {
                    appleIAPRate = 12; // 12% for macOS/tvOS/visionOS/watchOS
                }
                
                // Standard commission rate for alternative payment (no Video Partner Program benefits)
                let appleAltRate;
                if (platform === 'ios-ipados') {
                    appleAltRate = 17; // 17% for iOS/iPadOS
                } else {
                    appleAltRate = 27; // 27% for macOS/tvOS/visionOS/watchOS
                }
                
                // For single-item with external payment, there's an additional acquisition fee
                let acquisitionFee = 0;
                
                if (mode === 'item' && productType === 'one-time' && pspRate > 0) {
                    acquisitionFee = 0.05 * amount; // 5% acquisition fee for one-time purchases
                }
                
                // Calculate fees for Apple IAP
                const appleBaseAmount = (appleIAPRate / 100) * amount;
                const appleProcessingAmount = 0.03 * amount;
                const appleTotalAmount = appleBaseAmount + appleProcessingAmount;
                const appleNetRevenue = amount - appleTotalAmount;
                const appleTotalPercent = (appleTotalAmount / amount) * 100;
                
                // Calculate fees for alternative payment
                const altAppleAmount = (appleAltRate / 100) * amount;
                const altPspAmount = (pspRate / 100) * amount;
                const altTotalAmount = altAppleAmount + altPspAmount + acquisitionFee;
                const altNetRevenue = amount - altTotalAmount;
                const altTotalPercent = (altTotalAmount / amount) * 100;
                
                // Calculate savings
                const savings = altNetRevenue - appleNetRevenue;
                
                // Update Apple IAP results
                document.getElementById('apple-base-fee').textContent = formatCurrency(appleBaseAmount) + ' (' + appleIAPRate + '%)';
                document.getElementById('apple-processing-fee').textContent = formatCurrency(appleProcessingAmount) + ' (3%)';
                document.getElementById('apple-total-fee').textContent = formatCurrency(appleTotalAmount) + ' (' + appleTotalPercent.toFixed(1) + '%)';
                document.getElementById('apple-net-revenue').textContent = formatCurrency(appleNetRevenue);
                
                // Update Alternative Payment results
                document.getElementById('alt-apple-fee').textContent = formatCurrency(altAppleAmount) + ' (' + appleAltRate + '%)';
                document.getElementById('alt-psp-fee').textContent = formatCurrency(altPspAmount) + ' (' + pspRate + '%)';
                
                // Update acquisition fee
                const acquisitionContainer = document.getElementById('alt-acquisition-container');
                if (acquisitionFee > 0) {
                    acquisitionContainer.innerHTML = `
                        <div class="fee-detail">
                            <div class="fee-description">Frais d'acquisition (achat unique)</div>
                            <div class="fee-amount">${formatCurrency(acquisitionFee)} (5%)</div>
                        </div>
                    `;
                } else {
                    acquisitionContainer.innerHTML = '';
                }
                
                document.getElementById('alt-total-fee').textContent = formatCurrency(altTotalAmount) + ' (' + altTotalPercent.toFixed(1) + '%)';
                document.getElementById('alt-net-revenue').textContent = formatCurrency(altNetRevenue);
                
                // Update savings message
                const savingsContainer = document.getElementById('savings-container');
                const savingsText = document.getElementById('savings-text');
                
                if (mode === 'item') {
                    const productTypeText = productType === 'one-time' ? 'achat unique' : 'abonnement';
                    if (savings > 0) {
                        savingsContainer.style.borderColor = '#34c759';
                        savingsText.innerHTML = 'Pour ce ' + productTypeText + ' à ' + formatCurrency(amount) + ', l\'option <strong>Paiement Alternatif</strong> vous permet d\'économiser <span class="savings-amount">' + formatCurrency(savings) + '</span> par transaction.';
                    } else if (savings < 0) {
                        savingsContainer.style.borderColor = '#ff3b30';
                        savingsText.innerHTML = 'Pour ce ' + productTypeText + ' à ' + formatCurrency(amount) + ', l\'option <strong>IAP Apple</strong> vous permet d\'économiser <span class="savings-amount">' + formatCurrency(Math.abs(savings)) + '</span> par transaction.';
                    } else {
                        savingsContainer.style.borderColor = '#8e8e93';
                        savingsText.textContent = 'Les deux options ont le même coût pour ce prix d\'article.';
                    }
                } else {
                    if (savings > 0) {
                        savingsContainer.style.borderColor = '#34c759';
                        savingsText.innerHTML = 'L\'option <strong>Paiement Alternatif</strong> vous permet d\'économiser <span class="savings-amount">' + formatCurrency(savings) + '</span> par mois, soit <span class="savings-amount">' + formatCurrency(savings * 12) + '</span> par an.';
                    } else if (savings < 0) {
                        savingsContainer.style.borderColor = '#ff3b30';
                        savingsText.innerHTML = 'L\'option <strong>IAP Apple</strong> vous permet d\'économiser <span class="savings-amount">' + formatCurrency(Math.abs(savings)) + '</span> par mois, soit <span class="savings-amount">' + formatCurrency(Math.abs(savings) * 12) + '</span> par an.';
                    } else {
                        savingsContainer.style.borderColor = '#8e8e93';
                        savingsText.textContent = 'Les deux options ont le même coût dans votre situation.';
                    }
                }
                
                // Update comparison table
                document.getElementById('compare-apple-percent').textContent = appleTotalPercent.toFixed(1) + '%';
                document.getElementById('compare-alt-percent').textContent = altTotalPercent.toFixed(1) + '%';
                document.getElementById('compare-apple-revenue').textContent = formatCurrency(appleNetRevenue);
                document.getElementById('compare-alt-revenue').textContent = formatCurrency(altNetRevenue);
                
                if (appleTotalPercent < altTotalPercent) {
                    document.getElementById('compare-cost-winner').innerHTML = '<span class="better-option">IAP Apple</span>';
                    document.getElementById('compare-revenue-winner').innerHTML = '<span class="better-option">IAP Apple</span>';
                } else if (appleTotalPercent > altTotalPercent) {
                    document.getElementById('compare-cost-winner').innerHTML = '<span class="better-option">Paiement Alternatif</span>';
                    document.getElementById('compare-revenue-winner').innerHTML = '<span class="better-option">Paiement Alternatif</span>';
                } else {
                    document.getElementById('compare-cost-winner').textContent = 'Égalité';
                    document.getElementById('compare-revenue-winner').textContent = 'Égalité';
                }
                
                // Update conclusion
                updateConclusion(amount, savings, appleTotalPercent, altTotalPercent, pspRate, mode, productType, platform);
            }
            
            function updateConclusion(amount, savings, applePercent, altPercent, pspRate, mode, productType = 'subscription', platform = 'ios-ipados') {
                let conclusion = '';
                const pspBetter = altPercent < applePercent;
                
                let platformText = '';
                if (platform === 'ios-ipados') {
                    platformText = 'iOS/iPadOS';
                } else {
                    platformText = 'macOS/tvOS/visionOS/watchOS';
                }
                
                // Base conclusion on transaction type and other factors
                if (mode === 'item') {
                    const productTypeText = productType === 'one-time' ? 'achat unique' : 'abonnement';
                    if (pspBetter) {
                        conclusion = `Pour ce ${productTypeText} à ${formatCurrency(amount)} sur ${platformText}, le paiement alternatif est plus avantageux financièrement (économie de ${formatCurrency(savings)} par transaction), malgré la perte des avantages du Video Partner Program. Cependant, évaluez si cette économie justifie de potentiellement compromettre certaines intégrations et fonctionnalités.`;
                    } else {
                        conclusion = `Pour ce ${productTypeText} à ${formatCurrency(amount)} sur ${platformText}, les IAP d'Apple sont clairement plus avantageux, tant financièrement (économie de ${formatCurrency(Math.abs(savings))} par transaction) que pour conserver les avantages du Video Partner Program. Il est recommandé de continuer à utiliser le système de paiement in-app d'Apple.`;
                    }
                } else { // monthly revenue
                    if (Math.abs(savings) < 100) {
                        conclusion = `Pour votre chiffre d'affaires mensuel sur ${platformText}, les deux options sont très proches d'un point de vue financier. Dans ce cas, il est préférable de privilégier les IAP d'Apple pour conserver les avantages du Video Partner Program, notamment l'intégration avec l'app Apple TV, Universal Search, Siri et autres fonctionnalités.`;
                    } else if (pspBetter) {
                        if (pspRate < 2) {
                            conclusion = `Pour votre chiffre d'affaires mensuel de ${formatCurrency(amount)} sur ${platformText}, le paiement alternatif est significativement plus avantageux financièrement (économie de ${formatCurrency(savings)} par mois), principalement grâce au taux exceptionnellement bas de votre prestataire de paiement (${pspRate}%). Toutefois, considérez que vous perdrez les avantages du Video Partner Program, ce qui pourrait impacter la découvrabilité et l'intégration de votre application.`;
                        } else {
                            conclusion = `Pour votre chiffre d'affaires mensuel de ${formatCurrency(amount)} sur ${platformText}, le paiement alternatif est plus avantageux financièrement, avec une économie mensuelle de ${formatCurrency(savings)}. Cependant, évaluez si cette économie justifie de perdre les avantages du Video Partner Program, comme l'intégration avec l'app Apple TV.`;
                        }
                    } else {
                        conclusion = `Pour votre chiffre d'affaires mensuel de ${formatCurrency(amount)} sur ${platformText}, les IAP d'Apple sont clairement plus avantageux, tant sur le plan financier (économie de ${formatCurrency(Math.abs(savings))} par mois) que pour maintenir tous les avantages du Video Partner Program. Il est préférable de continuer à utiliser le système de paiement in-app d'Apple.`;
                    }
                }
                
                // Add video-specific reminder
                conclusion += '<br><br><strong>Rappel :</strong> Opter pour un paiement alternatif vous fait automatiquement sortir du Video Partner Program. Ce choix entraîne non seulement des taux de commission standard plus élevés mais aussi la perte des intégrations avec les services Apple, ce qui peut avoir un impact significatif sur la découvrabilité et l\'expérience utilisateur de votre application.';
                
                document.getElementById('conclusion-text').innerHTML = conclusion;
            }
            
            function formatCurrency(amount) {
                return new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR' }).format(amount);
            }
        });
    </script>
</body>
</html>
